<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#0b2f7a">
  <title>Ferreter√≠a Universal</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

  <div class="phone-frame">
    <!-- HEADER -->
    <header class="app-header">
      <div class="header-top">
        <div class="header-spacer"></div>

        <div class="brand-center">
          <img src="logo.png" class="brand-logo" alt="Ferreter√≠a Universal" onerror="this.style.display='none'">
        </div>

        <div id="netIcon" class="net-icon offline" title="Sin conexi√≥n" aria-label="Estado de red" role="img">üåç</div>
      </div>
    </header>

    <!-- MAIN -->
    <main class="container">

      <!-- HOME -->
      <section id="homeScreen" class="screen">
        <div class="card hero">

          <div class="home-layout">
            <!-- IZQUIERDA -->
            <div class="home-left">
              <h1 class="title">Control de Inventario</h1>
              <p class="subtitle">
                Trabaja <b>offline</b>. Con internet, la app descarga el inventario maestro desde computadora de Auditoria y se actualiza.
              </p>

              <div class="stats">
                <div class="stat">
                  <div class="stat-label">Productos</div>
                  <div class="stat-value" id="homeProductos">0</div>
                </div>
                <div class="stat">
                  <div class="stat-label">Versi√≥n</div>
                  <div class="stat-value small" id="homeVersion">‚Äî</div>
                </div>
                <div class="stat">
                  <div class="stat-label">Mov. hoy</div>
                  <div class="stat-value" id="homeMovHoy">0</div>
                </div>
                <div class="stat">
                  <div class="stat-label">Estado</div>
                  <div class="stat-value" id="homeEstado">OFF</div>
                </div>
              </div>

              <button class="btn primary" id="btnSync" type="button">Actualizar inventario</button>
            </div>

            <!-- DERECHA -->
            <div class="home-right">
              <div class="grid">
                <button class="tile" id="btnCatalogo" type="button">
                  <div class="tile-emoji">üì¶</div>
                  <div class="tile-title">Cat√°logo</div>
                  <div class="tile-desc">Buscar productos</div>
                </button>

                <button class="tile" id="btnEntrada" type="button">
                  <div class="tile-emoji">‚ûï</div>
                  <div class="tile-title">Entradas</div>
                  <div class="tile-desc">Registrar ingreso</div>
                </button>

                <button class="tile" id="btnSalida" type="button">
                  <div class="tile-emoji">‚ûñ</div>
                  <div class="tile-title">Salidas</div>
                  <div class="tile-desc">Registrar salida</div>
                </button>

                <button class="tile" id="btnHistorial" type="button">
                  <div class="tile-emoji">üìú</div>
                  <div class="tile-title">Historial</div>
                  <div class="tile-desc">Facturas y eliminaciones</div>
                </button>
              </div>

              <button class="btn export" id="btnExport" type="button">üì§ Exportar reporte diario (Excel)</button>
              <p class="hint">
                El Excel se genera en el tel√©fono. En Android quedara en <b>Descargas</b>.
              </p>
            </div>
          </div>

        </div>
      </section>

      <!-- CATALOGO -->
      <section id="catalogScreen" class="screen hidden">
        <div class="card">
          <div class="screen-head">
            <h2 class="h2">Cat√°logo</h2>
            <button class="btn small" id="btnBackCatalog" type="button">‚¨Ö</button>
          </div>

          <input id="catalogSearch" class="input" placeholder="Buscar por c√≥digo o nombre...">

          <!-- üîΩ FILTROS -->
          <div class="filters">
            <select id="filterDepartamento" class="input small">
              <option value="">Todos los departamentos</option>
            </select>

            <button class="btn small" id="btnFilterStock" type="button">
              üì¶ Con stock
            </button>

            <button class="btn small ghost" id="btnClearFilters" type="button">
              ‚ùå Quitar filtros
            </button>
          </div>

          <div id="catalogInfo" class="note"></div>

          <div class="table-wrap">
            <div class="table-head cols-catalog">
              <div>C√≥digo</div>
              <div>Producto</div>
              <div>Departamento</div>
              <div class="right">Stock</div>
            </div>
            <div id="catalogList" class="table-body"></div>
          </div>
        </div>
      </section>

      <!-- ENTRADAS -->
      <section id="entradaScreen" class="screen hidden">
        <div class="card">
          <div class="screen-head">
            <h2 class="h2">Entrada</h2>
            <button class="btn small" id="btnBackEntrada" type="button">‚¨Ö</button>
          </div>

          <div class="field">
            <label class="label">C√≥digo</label>
            <div class="input-row">
              <input id="entradaCodigo" class="input" placeholder="Ej: 12-345" autocomplete="off" inputmode="numeric" pattern="[0-9]*">
              <button class="icon-btn" id="btnBuscarEntrada" type="button" title="Buscar producto">üîç</button>
            </div>
          </div>

          <div class="field">
            <label class="label">Producto</label>
            <input id="entradaProducto" class="input" placeholder="Se llena autom√°ticamente" readonly>
          </div>

          <div class="field">
            <label class="label">Cantidad</label>
            <input id="entradaCantidad" class="input" type="number" min="1" inputmode="numeric" placeholder="Ej: 10">
          </div>

          <div class="field">
            <label class="label">Proveedor</label>
            <input id="entradaProveedor" class="input" placeholder="Ej: Proveedor XYZ">
          </div>

          <div class="field">
            <label class="label">Factura</label>
            <input id="entradaFactura" class="input" placeholder="Ej: FAC-001">
          </div>

          <div class="field">
            <label class="label">Fecha</label>
            <input id="entradaFecha" class="input" type="date">
          </div>

          <button class="btn" id="btnAddEntradaItem" type="button">‚ûï Agregar producto a factura</button>

          <div class="note" id="entradaItemsInfo">Factura vac√≠a.</div>

          <!-- ‚úÖ PREVIEW FACTURA (MISMO ESTILO QUE HISTORIAL) -->
          <div id="entradaFacturaPreview"></div>

          <div class="btn-row">
            <button class="btn danger" id="btnClearEntradaItems" type="button">üßπ Vaciar factura</button>
            <button class="btn primary" id="btnGuardarEntrada" type="button">Guardar factura</button>
          </div>

        </div>
      </section>

      <!-- SALIDAS -->
      <section id="salidaScreen" class="screen hidden">
        <div class="card">
          <div class="screen-head">
            <h2 class="h2">Salida</h2>
            <button class="btn small" id="btnBackSalida" type="button">‚¨Ö</button>
          </div>

          <div class="field">
            <label class="label">C√≥digo</label>
            <div class="input-row">
              <input id="salidaCodigo" class="input" placeholder="Ej: 12-345" autocomplete="off" inputmode="numeric" pattern="[0-9]*">
              <button class="icon-btn" id="btnBuscarSalida" type="button" title="Buscar producto">üîç</button>
            </div>
          </div>

          <div class="field">
            <label class="label">Producto</label>
            <input id="salidaProducto" class="input" placeholder="Se llena autom√°ticamente" readonly>
          </div>

          <div class="field">
            <label class="label">Cantidad</label>
            <input id="salidaCantidad" class="input" type="number" min="1" inputmode="numeric" placeholder="Ej: 2">
            <div class="note" id="salidaStockInfo"></div>
          </div>

          <div class="field">
            <label class="label">Factura</label>
            <input id="salidaFactura" class="input" placeholder="Ej: FAC-123">
          </div>

          <div class="field">
            <label class="label">Fecha</label>
            <input id="salidaFecha" class="input" type="date">
          </div>

          <button class="btn" id="btnAddSalidaItem" type="button">‚ûï Agregar producto a factura</button>

          <div class="note" id="salidaItemsInfo">Factura vac√≠a.</div>

          <!-- ‚úÖ PREVIEW FACTURA (MISMO ESTILO QUE HISTORIAL) -->
          <div id="salidaFacturaPreview"></div>

          <div class="btn-row">
            <button class="btn danger" id="btnClearSalidaItems" type="button">üßπ Vaciar factura</button>
            <button class="btn primary" id="btnGuardarSalida" type="button">Guardar factura</button>
          </div>

        </div>
      </section>

      <!-- BUSCADOR (B2) -->
      <section id="searchScreen" class="screen hidden">
        <div class="card">
          <div class="screen-head">
            <h2 class="h2">Buscar producto</h2>
            <button class="btn small" id="btnBackSearch" type="button">‚¨Ö</button>
          </div>

          <input id="searchInput" class="input" placeholder="Buscar por c√≥digo o nombre..." autocomplete="off">
          <div id="searchInfo" class="note"></div>

          <div class="table-wrap">
            <div class="table-head cols-search">
              <div>C√≥digo</div>
              <div>Producto</div>
              <div>Departamento</div>
              <div class="right">Stock</div>
              <div class="right">Acci√≥n</div>
            </div>
            <div id="searchList" class="table-body"></div>
          </div>
        </div>
      </section>

      <!-- HISTORIAL -->
      <section id="historialScreen" class="screen hidden">
        <div class="card">
          <div class="screen-head">
            <h2 class="h2">Historial</h2>
            <button class="btn small" id="btnBackHistorial" type="button">‚¨Ö</button>
          </div>

          <div class="tabs">
            <button class="tab active" id="tabMov" type="button">Facturas</button>
            <button class="tab" id="tabDel" type="button">Eliminaciones</button>
          </div>

          <input id="histSearch" class="input" placeholder="Buscar por factura, c√≥digo o producto..." autocomplete="off">

          <div class="table-wrap">
            <div id="histHeadDel" class="table-head cols-hdel hidden">
              <div>Fecha/Hora</div>
              <div>Tipo</div>
              <div>C√≥digo</div>
              <div>Producto</div>
              <div class="right">Cant.</div>
              <div>Detalle</div>
            </div>

            <div id="histList" class="hist-list"></div>
          </div>
        </div>
      </section>

      <!-- TOAST -->
      <div id="toast" class="toast" aria-live="polite"></div>

      <!-- CONFIRM MODAL -->
      <div id="confirmOverlay" class="confirm-overlay hidden">
        <div class="confirm-box">
          <div id="confirmMessage" class="confirm-text"></div>
          <div class="confirm-actions">
            <button id="confirmCancel" class="btn" type="button">Cancelar</button>
            <button id="confirmOk" class="btn danger" type="button">Eliminar</button>
          </div>
        </div>
      </div>

    </main>

    <footer class="footer">
      Ferreter√≠a Universal ¬∑ v2.2 ¬∑ Carlos Tercero
    </footer>
  </div>

  <!-- Excel -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="./script.js"></script>
</body>
</html>
